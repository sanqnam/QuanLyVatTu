<div class="row" style="border-bottom: 2px solid blue; margin-bottom: 20px;">
    <div class="pagetitle col-lg-3 col-md-3">
      <h1>Phiếu trả</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="" >Home</a></li>
          <li class="breadcrumb-item">Phiếu</li>
          <li class="breadcrumb-item">Phiếu trả</li>
        </ol>
      </nav>
  </div>
  <div class="col-lg-9 col-md-9">
    <form [formGroup]="filterForm">
      <div class="row">
        <div class="col-2" style="float: left;">
          <select class="form-select" name="size" formControlName="size" (change)="filterSelect()"
            [(ngModel)]="tableSize">
            <ng-container *ngFor="let size of tableSizes">
              <option [selected]="size == tableSize" [value]="size">{{size}}</option>
            </ng-container>
          </select>
        </div>
      </div>
    </form>
  </div>
  </div>
  <section class="section profile">
    <div class="row">
      
      <table class="table table-hover">
        <thead>
          <tr style="line-height: 36px;">
            <th scope="col">#</th>            
            <th scope="col">Lý do trả phiếu</th>
            <th scope="col">Số lần sửa</th>
            <th scope="col">Thời gian tạo</th>
            <th scope="col">Tổng tiền</th>
            <th scope="col">Tình trạng</th>
            <th scope="col">Sửa phiếu</th>
          </tr>
        </thead>
        <tbody>
          <tr style="line-height: 32px;" *ngFor="let phieu of DsPhieu
                                  | paginate:{
                                    itemsPerPage: tableSize,
                                    currentPage: page,
                                    totalItems: counts
                                    }; let i = index ">
            <th scope="row">{{i+1}}</th>
            <td>{{phieu.lyDoTraPhieu}}</td>
            <td>{{phieu.soLanSuaPhieu}}</td>
            <td>{{phieu.timeTaoPhieu | date: 'dd/MM/yyyy HH:mm'}}</td>
            <td>{{formatCurrency(phieu.tongTien) }}</td>      
            <td>{{phieu.tinhTrangPhieu}}</td>      
            <td>
                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#SuaPhieuMua" (click)="combinedLoad(phieu.idPhieuTrinhMua)">
                  <i class="bx bx-edit"></i>
                </button></td>
          </tr>
        </tbody>
      </table>
      <div class="row" *ngIf="DsPhieu!=null">
        <pagination-controls class="pagination justify-content-center" style="padding-top: 14px;" previousLabel="Prev"
          nextLabel="Next" (pageChange)="onTableDataChange($event)">
        </pagination-controls>
      </div>
      
      <div class="modal fade " id="SuaPhieuMua" tabindex="-1">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header row">
              <div class="col-4">
                <h5 class="modal-title">Sửa phiếu</h5>
              </div>
              <div class="col-4" *ngIf="showPhieuMua">
                Tổng tiền: {{formatCurrency(phieuMua.tongTien)}}
              </div>
              <div class="col-1">
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"
                (click)="ngOnInit()"></button>
              </div>              
            </div>
            <div class="modal-body">

              <app-sua-phieu-mua [dsChiTiet]="dsChiTiet" [phieu]="phieuMua"></app-sua-phieu-mua>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
